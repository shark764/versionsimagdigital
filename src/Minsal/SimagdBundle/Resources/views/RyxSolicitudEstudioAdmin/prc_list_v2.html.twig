{# empty Twig template #}

{% extends 'MinsalSimagdBundle::simagd_base_list_v2.html.twig' %}

{# Permisos solicitudes #}
{% set _PRC_ALLOW_CREATE 	= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_ESTUDIO_CREATE') or is_granted('ROLE_ADMIN') ? true : false %}
{% set _PRC_ALLOW_EDIT 		= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_ESTUDIO_EDIT') or is_granted('ROLE_ADMIN') ? true : false %}
{% set _PRC_ALLOW_LIST 		= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_ESTUDIO_LIST') or is_granted('ROLE_ADMIN') ? true : false %}
{% set _PRC_ALLOW_VIEW 		= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_ESTUDIO_VIEW') or is_granted('ROLE_ADMIN') ? true : false %}

{# Permisos solicitudes de diagnósticos #}
{% set _SOLDIAG_ALLOW_CREATE 	= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_DIAGNOSTICO_CREATE') or is_granted('ROLE_ADMIN') ? true : false %}
{% set _SOLDIAG_ALLOW_EDIT 	= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_DIAGNOSTICO_EDIT') or is_granted('ROLE_ADMIN') ? true : false %}
{% set _SOLDIAG_ALLOW_LIST 	= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_DIAGNOSTICO_LIST') or is_granted('ROLE_ADMIN') ? true : false %}
{% set _SOLDIAG_ALLOW_VIEW 	= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_DIAGNOSTICO_VIEW') or is_granted('ROLE_ADMIN') ? true : false %}

{# Permisos complementarios #}
{% set _SOLCMPL_ALLOW_CREATE 	= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_ESTUDIO_COMPLEMENTARIO_CREATE') or is_granted('ROLE_ADMIN') ? true : false %}
{% set _SOLCMPL_ALLOW_EDIT 	= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_ESTUDIO_COMPLEMENTARIO_EDIT') or is_granted('ROLE_ADMIN') ? true : false %}
{% set _SOLCMPL_ALLOW_LIST 	= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_ESTUDIO_COMPLEMENTARIO_LIST') or is_granted('ROLE_ADMIN') ? true : false %}
{% set _SOLCMPL_ALLOW_VIEW 	= is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_SOLICITUD_ESTUDIO_COMPLEMENTARIO_VIEW') or is_granted('ROLE_ADMIN') ? true : false %}

{% block stylesheets %}
    {{ parent() }}

    {# new select2 #}
    <link href="{{ asset('bundles/minsalsimagd/css/select2-woocommerce.css') }}" type="text/css" rel="stylesheet" />

    {# bootstrap text-editor summernote #}
    <link href="{{ asset('bundles/minsalsimagd/plugin/summernote-master/dist/summernote.css') }}" type="text/css" rel="stylesheet" />

{% endblock %}

{% block javascripts %}
    {{ parent() }}
    
    <script>
        /*
         * 
         * @type String
         * navbar menu container for bstables
         */
        var $pattern_bstable_container  = 'menu-listas-solicitudes';
        
        var $isGranted_studyRequest,
            $isGranted_studyView,
            $isGranted_assignNewRecord;
        
	var $selectionsPriority		= [],
            $listPriority 		= [],
            $prc_is_granted_changePriority,
	    $solcmpl_is_granted_changePriority;
	
        $isGranted_studyRequest             = {% if _PRC_ALLOW_CREATE == true and _PRC_ALLOW_EDIT == true %} true {% else %} false {% endif %};
        $isGranted_studyView                = {% if is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_ESTUDIO_PACIENTE_LIST') and is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_ESTUDIO_PACIENTE_VIEW') or is_granted('ROLE_ADMIN') %} true {% else %} false {% endif %};
        $isGranted_assignNewRecord          = {% if _PRC_ALLOW_CREATE == true or _PRC_ALLOW_EDIT == true or is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_PROCEDIMIENTO_REALIZADO_CREATE') or is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_LECTURA_CREATE') or is_granted('ROLE_ADMIN') %} true {% else %} false {% endif %};
	$prc_is_granted_changePriority      = {% if _PRC_ALLOW_CREATE == true or _PRC_ALLOW_EDIT == true %} true {% else %} false {% endif %};
	$solcmpl_is_granted_changePriority  = {% if _SOLCMPL_ALLOW_CREATE == true or _SOLCMPL_ALLOW_EDIT == true %} true {% else %} false {% endif %};
	
        jQuery(document).ready(function() {
	    /** Lista de prioridades */
	    {% for prioridad in prioridades %}
		$selectionsPriority.push({ id: '{{ prioridad.nombre|trim }}', text: '{{ prioridad.nombre|trim }}' });
		$listPriority.push({ id: '{{ prioridad.id }}', text: '{{ prioridad.nombre|trim }}', cod: '{{ prioridad.codigo|trim }}', style: '{{ prioridad.estiloPresentacion|trim }}' });
	    {% endfor %}
    
            console.log('agenda editable: false -> override for object:editable, ----> for cit from radx\nbtn new prc in navbar\nnew navbar in edit form, detail view on dropdown');
        });

        (function ($) {
            /*
             * 
             * @type type
             * Global variables for plugin
             */
            window.GROUP_DEPENDENT_ENTITIES = null;   // --| build data collection
            GROUP_DEPENDENT_ENTITIES        = JSON.parse('{{ GROUP_DEPENDENT_ENTITIES|json_encode|e('js')|raw }}');

        }(jQuery));
    </script>

    {# bootstrap text-editor summernote #}
    <script type="text/javascript" src="{{ asset('bundles/minsalsimagd/plugin/summernote-master/dist/summernote.min.js') }}" ></script>
    <script type="text/javascript" src="{{ asset('bundles/minsalsimagd/plugin/summernote-master/dist/lang/summernote-es-ES.js') }}" ></script>
    <script type="text/javascript" src="{{ asset('bundles/minsalsimagd/js/simagd_summernote_config.js') }}" ></script>

    {# new record for patient typeahead #}
    <script type="text/javascript" src="{{ asset('bundles/minsalsimagd/js/RyxSolicitudEstudioAdmin/prc_assignToNewRecord_alert.js') }}" ></script>
    <script type="text/javascript" src="{{ asset('bundles/minsalsimagd/js/simagd_newRecord_typeahead.js') }}" ></script>
    
    {# bootstrap-editable #}
    {#<script type="text/javascript" src="{{ asset('bundles/minsalsimagd/plugin/bootstrap-table-master/dist/extensions/editable/bootstrap-table-editable.min.js') }}" ></script>#}
    <script type="text/javascript" src="{{ asset('bundles/minsalsimagd/js/simagd-label-bootstrap-table-editable.js') }}" ></script>

    {# Script prc #}
    <script type="text/javascript" src="{{ asset('bundles/minsalsimagd/js/RyxSolicitudEstudioAdmin/prc_list_v2.js') }}" ></script>
    <script type="text/javascript" src="{{ asset('bundles/minsalsimagd/js/RyxSolicitudEstudioAdmin/prc_solicitudEmergencia.js') }}" ></script>
    {# Script soldiag #}
    <script type="text/javascript" src="{{ asset('bundles/minsalsimagd/js/RyxSolicitudDiagnosticoPostEstudioAdmin/soldiag_list_v2.js') }}" ></script>
    {# Script solcmpl #}
    <script type="text/javascript" src="{{ asset('bundles/minsalsimagd/js/RyxSolicitudEstudioComplementarioAdmin/solcmpl_list_v2.js') }}" ></script>

{% endblock %}
    
{% block simagd_bs_alert %}
    {{ parent() }}
    
    {% include 'MinsalSimagdBundle:RyxSolicitudEstudioAdmin:prc_assignToNewRecord_alert.html.twig' %}
{% endblock %}

{% block simagd_navbar_menu_label %}
    <i class="fa fa-inbox"></i> <i class="fa fa-paperclip"></i> <i class="fa fa-reply-all"></i> Solicitudes
{% endblock %}

{% block simagd_navbar_left_nav %}
    <li class="list-table-link-navbar-parent dropdown active">
	<a   href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false"><span class="text-info"> <i class="fa fa-list-ul"></i> <i class="fa fa-inbox"></i> </span> Solicitudes <span class="text-info"><span class="caret"></span></span></a>
	<ul class="dropdown-menu" role="menu">
	    <li class="list-table-link-navbar active {% if _PRC_ALLOW_LIST == false %} disabled link-full-disabled {% endif %}">
		<a   href="javascript:void(0)" id="show-table-solicitudes-estudio-list" data-divtabletarget="div-resultado-solicitudes-estudio"
		    {% if _PRC_ALLOW_LIST == false %} disabled="disabled" {% endif %}>
		    <span class="glyphicon glyphicon-tasks "></span> Solicitudes de estudio
		</a>
	    </li>
	    <li class="divider"></li>
	    <li class="list-table-link-navbar {% if _SOLDIAG_ALLOW_LIST == false %} disabled link-full-disabled {% endif %}">
		<a   href="javascript:void(0)" id="show-table-solicitudes-diagnostico-list" data-divtabletarget="div-resultado-solicitudes-diagnostico"
		    {% if _SOLDIAG_ALLOW_LIST == false %} disabled="disabled" {% endif %}>
		    <span class="glyphicon glyphicon-paperclip "></span> Solicitudes de diagnóstico
		</a>
	    </li>
	    <li class="divider"></li>
	    <li class="list-table-link-navbar {% if _SOLCMPL_ALLOW_LIST == false %} disabled link-full-disabled {% endif %}">
		<a   href="javascript:void(0)" id="show-table-solicitudes-estudio-compl-list" data-divtabletarget="div-resultado-solicitudes-estudio-compl"
		    {% if _SOLCMPL_ALLOW_LIST == false %} disabled="disabled" {% endif %}>
		    <span class="glyphicon glyphicon-export "></span> Solicitudes de estudio complementario
		</a>
	    </li>
	</ul>
    </li>
{% endblock %}

{% block simagd_navbar_middle_nav %}
    <form class="navbar-form navbar-left navbar-input-group" role="search">
	<div class="form-group has-feedback">
	    <input type="text" class="typeahead explocal_navbar_typeahead form-control" autocomplete="off" placeholder="expediente" id="navbar_filter_expNumero" name="navbar_filter_expNumero" data-xparam-filter="true" data-template-source="getSearchExpedienteSourceTemplate">
	    <i class="glyphicon glyphicon-remove-circle form-control-feedback typeahead-custom-clear" id="clear-typeahead-filter-exp"></i>
	</div>
        <div class="btn-group">
            <button type="submit"    id="btn_search_filter_expNumero" name="btn_search_filter_expNumero" class="btn btn-primary-v4 btn-outline {#btn-sm#}">
                <i class="fa fa-search"></i>
            </button>
            <button type="button"    id="btn_add_action_prc" class="btn btn-primary-v4 btn-outline dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Aplicar a expediente">
                <b class="caret"></b>
            </button>
            <!-- Menu -->
            <ul class="dropdown-menu" id="menu_prc_moreActions" >
                <li {% if _PRC_ALLOW_CREATE == false %} class="disabled" {% endif %}>
                    <a   href="javascript:void(0)" id="btn_navbar_add_prc" {% if _PRC_ALLOW_CREATE == false %} disabled="disabled" {% endif %} target="_blank">
                        <span class="glyphicon glyphicon-edit"></span> Nueva solicitud
                    </a>
                </li>
            </ul>
        </div>
    </form>
{% endblock %}

{% block simagd_navbar_right_nav %}
{% endblock %}
    
{% block sonata_admin_content -%}
    {{ parent() }}
    {#<span class="label label-danger">QUE LA RECEPCIONISTA NO PUEDA EDITAR EN LIST->EDITALLOW... FORM PARA CAMBIAR PRIORIDAD</span><br/>
    <span class="label label-primary">LA RECEPCIONISTA DE MOMENTO DEBE PODER INSERTAR PRC, SE DEBEN CAMBIAR VALIDACIONES QUE IMPIDAN Q SE PUEDA GUARDAR CUANDO ES "CIT"</span><br/>
    <span class="label label-primary">SE DEBE ACTIVAR VALIDACIONES PARA IMPEDIR Q TODOS PUEDAN CAMBIAR LA PRIORIDAD Y EL HABILITADO, ES DECIR EL EDITABLE-TABLE-PLUGIN</span><br/>#}
                                    
{#    <span class="label label-element-v2">PARA CASOS DE REFERIDOS, PONER UN CAMPO EXPEDIENTE, Q ESTARIA LLENO CON EL EXPEDIENTE EN CASO Q SEA LOCAL, Y EL CAMPO ESTAB (CON B.M) Y EMPLEADO SERIA UN NOMBRE ESCRITO, AUNQ ESTO GENERARIA PROBLEMAS PARA SELECCIONARLO DE LISTA Y MOSTRARLOS (NUEVO FORMATO EN TABLAS PARA REFERIDOS)</span>#}

    {% if _PRC_ALLOW_LIST == true %}
        <!-- toolbar for table-lista-solicitudes -->
        {% set code_entity  = 'prc' %}
        <div id="bs_{{ code_entity }}_toolbar" class="table_bsTable_toolbar"> <!-- toolbar for table-lista-entity -->

            {#<div class="columns columns-left btn-group pull-left">#}
                <!-- Single button -->
                <div class="btn-group">
                    <button type="button"    id="btn_{{ code_entity }}_filter_display" class="btn btn-primary-v4 btn-outline dropdown-toggle btn_filter_display" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Filtrar datos" disabled="disabled">
                        <i class="glyphicon glyphicon-filter"></i>
                        Filtrar <span class="caret"></span>
                    </button>
                    <!-- Menu -->
                    <ul class="dropdown-menu table_bsTable_toolbar_menuFilter" id="bs_{{ code_entity }}_menuFilter" >
                    </ul>
                </div>
                <button id="btn_{{ code_entity }}_filter_send" class="btn btn-primary-v4 btn-outline btn_toolbar_filter_send" title="Filtrar" {#disabled#}>
                    <i class="glyphicon glyphicon-repeat"></i>
                </button>
                <button id="btn_{{ code_entity }}_filter_remove" class="btn btn-default btn-outline btn_toolbar_filter_clear" title="Restablecer" {#disabled#}>
                    <i class="glyphicon glyphicon-trash"></i>
                </button>

                <!-- --| custom buttons for toolbar -->
                <span class="btn-separator"></span>
                
                <button id="btn_unknown_patient_add_item" class="btn btn-danger btn-outline btn_unknown_patient_add_item" title="Agregar paciente de emergencia" style="margin-left: 15px"
                        {% if not (_PRC_ALLOW_CREATE == true or is_granted('ROLE_ADMIN')) %} disabled="disabled" {% endif %}>
                    <i class="glyphicon glyphicon-plus-sign "></i>
                </button>
                
                <span class="btn-separator"></span>
                
                <button id="btn_external_patient_add_item" class="btn btn-element-v2 btn-outline btn_external_patient_add_item" title="Agregar paciente referido" style="margin-left: 15px"
                        {% if not (_PRC_ALLOW_CREATE == true or is_granted('ROLE_ADMIN')) %} disabled="disabled" {% endif %}>
                    <i class="glyphicon glyphicon-plus-sign "></i>
                </button>

                <!-- --| custom buttons for toolbar -->
                <span class="btn-separator"></span>
                
                <button id="btn_unknown_patient_assign_newRecord" class="btn btn-danger btn-outline btn_unknown_patient_assign_newRecord" title="Asignar registros a nuevo Expediente" style="margin-left: 15px" disabled="disabled">
                    <i class="glyphicon glyphicon-share "></i>
                </button>

                <!-- --| custom buttons for footer -->
                <span class="btn-separator"></span>

                <div class="btn-group" role="group" style="margin-left: 15px">
                    <button type="button"    class="btn btn-default btn-outline dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false" title="Alternar vista" {% if _PRC_ALLOW_CREATE == false %} disabled="disabled" {% endif %}>
                        <i class="glyphicon glyphicon-resize-horizontal"></i>
                        {#Alternar vista#} <span class="caret"></span>
                    </button>
                    <ul class="dropdown-menu" style="right: 0; left: auto;" >
                        <li {% if _PRC_ALLOW_LIST == false %} class="disabled" {% endif %}>
                            <a   href="javascript:void(0)" id="panel_studyrequest_btn_expand_view" {% if _PRC_ALLOW_LIST == false %} disabled="disabled" {% endif %}>
                                <span class="glyphicon glyphicon-resize-horizontal "></span> Vista completa
                            </a>
                        </li>
                        <li {% if _PRC_ALLOW_CREATE == false %} class="disabled" {% endif %} style="display: none;">
                            <a   href="javascript:void(0)" id="panel_studyrequest_btn_default_view" {% if _PRC_ALLOW_CREATE == false %} disabled="disabled" {% endif %}>
                                <span class="glyphicon glyphicon-resize-horizontal "></span> Vista predeterminada
                            </a>
                        </li>
                    </ul>
                </div>
                <!-- END --| custom buttons for toolbar -->
            {#</div>#}

        </div> <!-- END --| toolbar for table-lista-solicitudes -->
        
	<div id="div-resultado-solicitudes-estudio" class="menu-listas-solicitudes" data-refresh-url="{{ path('simagd_solicitud_estudio_generateData') }}">
            
            <div class="row outer">
                {% if _PRC_ALLOW_CREATE != false %}
                    <div id="container_prc_column_bsform" class="col-lg-3 col-md-3 col-sm-3" style="margin-top: 60px;">
                        <form id="crearSolicitudEstudioFormatoRapido_container_column_form" action="{{ path('simagd_solicitud_estudio_crearSolicitudEstudioFormatoRapido') }}" method="post" class="form-horizontal simagd-form-custom-class"
                            data-fv-framework="bootstrap"
                            data-fv-icon-valid="glyphicon glyphicon-ok"
                            data-fv-icon-invalid="glyphicon glyphicon-remove"
                            data-fv-icon-validating="glyphicon glyphicon-refresh"

                            data-fv-message="El valor introducido no es válido">

                            <div class="form-group" style="{#margin-top: 15px; visibility: hidden;#}">
                                <div class="col-xs-8 col-xs-offset-4">
                                    <button type="submit"    class="btn btn-primary-v4 btn-outline {#btn-xs#}"><i class="glyphicon glyphicon-ok"></i> Enviar</button>
                                    <button type="button"    class="btn btn-default btn-outline {#btn-xs#}"><i class="glyphicon glyphicon-remove"></i> Limpiar</button>
                                </div>
                            </div>
                            <div class="form-group">
                                <div class="col-xs-8 col-xs-offset-4">
                                    <span class="form-control-static" ><span class="text-success">Registro exitoso</span></span>
                                </div>
                            </div>

                        </form>
                    </div>
                {% endif %}
                <div id="container_prc_column_bstable" class="{% if _PRC_ALLOW_CREATE != false %} col-lg-9 col-md-9 col-sm-9 {% else %} col-lg-12 col-md-12 col-sm-12 {% endif %}">
                    <table class="table table-condensed" id="table-lista-solicitudes-estudio"
                            data-toggle="table"
                            data-id-field="prc_id"
                            data-url="{% if _PRC_ALLOW_CREATE == false and _PRC_ALLOW_EDIT == false %}{{ path('simagd_solicitud_estudio_generateData') }}{% endif %}"
                            data-backup-url="simagd_solicitud_estudio_generateData"
                            data-toolbar="#bs_prc_toolbar"
                            data-cache="false"
                            data-show-refresh="true"
                            data-show-toggle="true"
                            data-show-columns="true"
                            data-search="true"
                            data-select-item-name="listaSolicitudesToolbar"
                            {#data-side-pagination="server"#}
                            data-pagination="true"
                            data-page-list="[5, 10, 15, 25, 50, 75, 100{#, 200, 300, 500, 1000, All#}]"
                            {#data-sort-name="id"
                            data-sort-order="desc"#}
                            data-detail-view="false"
                            data-detail-formatter="prc_detailFormatter"
                            data-classes="table table-hover table-condensed table-no-bordered"
                            data-height="760">
                        <thead>
                            <tr style="background-color: #183f52 !important; color: #fff !important;">
                                {#<th data-field="action" data-switchable="false" class="col-md-2" data-halign="center" data-align="center" data-sortable="false">Acciones</th>#}
                                <th data-field="prc_id" data-filter-bstable-apply="true" data-filter-bstable-type="number" class="col-md-1" data-visible="false" data-align="center" data-halign="center" data-sortable="true">ID</th>
                                <th data-field="prc_paciente" data-filter-bstable-apply="false" data-filter-bstable-by="pct_id" data-filter-bstable-type="select2" data-filter-bstable-remote-data-source="true" data-formatter="simagdPacienteFormatter" data-switchable="false" class="col-md-3" data-align="left" data-halign="center" data-sortable="true">Paciente</th>
                                <th data-field="prc_origen" data-filter-bstable-apply="true" data-filter-bstable-by="stdroot_id" data-filter-bstable-type="select2" data-formatter="simagdOrigenFormatter" data-visible="false" class="col-md-3" data-align="left" data-halign="center" data-sortable="true">Referido desde</th>
                                <th data-field="prc_empleado" data-filter-bstable-apply="true" data-filter-bstable-by="empprc_id" data-filter-bstable-type="select2" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Solicitó</th>
                                <th data-field="prc_areaAtencion" data-filter-bstable-apply="true" data-filter-bstable-by="ar_id" data-filter-bstable-type="select2" data-visible="false" data-formatter="simagdAreaAtencionFormatter" class="col-md-1" data-align="left" data-halign="center" data-sortable="true">Procedencia</th>
                                <th data-field="prc_atencion" data-filter-bstable-apply="true" data-filter-bstable-by="atn_id" data-filter-bstable-type="select2" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Servicio clínico</th>
                                <th data-field="prc_referido" data-visible="false" data-filter-bstable-apply="true" data-filter-bstable-by="stdref_id" data-filter-bstable-type="select2" data-formatter="simagdReferidoFormatter" class="col-md-3" data-align="left" data-halign="center" data-sortable="true">Referido a</th>
                                <th data-field="prc_modalidad" data-filter-bstable-apply="true" data-filter-bstable-by="m_id" data-filter-bstable-type="select2" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Modalidad</th>
                                <th data-field="prAtn_nombre" data-filter-bstable-apply="true" data-filter-bstable-by="prAtn_id" data-filter-bstable-type="select2" {% if _PRC_ALLOW_CREATE == false and _PRC_ALLOW_EDIT == false %} data-formatter="simagdPrioridadAtencionFormatter" {% endif %} data-visible="false" class="col-md-1" data-align="left" data-halign="center" data-sortable="true">Prioridad</th>
                                <th data-field="prc_diagnosticante" data-formatter="simagdDiagnosticanteFormatter" data-visible="false" class="col-md-3" data-align="left" data-halign="center" data-sortable="true">Diagnosticar en</th>
                                <th data-field="prc_fechaCreacion" data-filter-bstable-apply="true" data-filter-bstable-type="combodate" data-formatter="simagdDateTimeFormatter" data-visible="false" class="col-md-2" data-align="right" data-halign="center" data-sortable="true">Se creó</th>
                                <th data-field="prc_fechaProximaConsulta" data-filter-bstable-apply="true" data-filter-bstable-type="combodate" data-formatter="simagdDateFormatter" data-visible="false" class="col-md-2" data-align="right" data-halign="center" data-sortable="true">Próxima consulta</th>
                                <th data-field="statusSc_nombreEstado" data-visible="false" data-formatter="estadoSolicitudFormatter" class="col-md-1" data-align="left" data-halign="center" data-sortable="true">Estado</th>
                                <th data-field="action" data-formatter="actionSolEstudioFormatter" data-events="actionSolEstudioEvents" class="col-md-3" data-align="left" data-halign="center"><span class="glyphicon glyphicon-cog"></span></th>
                                <th data-field="prc_chk" data-checkbox="true" data-formatter="selectableRowFormatter" class="col-md-1" data-align="center" data-halign="center" data-valign="middle"></th>
                            </tr>
                        </thead>
                    </table>
                </div>
            </div>
            
	</div>
    {% endif %}

    {% if _SOLDIAG_ALLOW_LIST == true %}
        <!-- toolbar for table-lista-lecturas -->
        {% include 'MinsalSimagdBundle:Menu:simagd_bstable_toolbar.html.twig' ignore missing with { 'code_entity': 'soldiag' } %}
        <!-- END --| toolbar for table-lista-lecturas -->
        
	<div id="div-resultado-solicitudes-diagnostico" style="display: none;" class="menu-listas-solicitudes" data-refresh-url="{{ path('simagd_solicitud_diagnostico_generateData') }}">
	    <table class="table table-condensed" id="table-lista-solicitudes-diagnostico"
		  data-toggle="table"
		  data-id-field="soldiag_id"
		  data-url=""
                  data-backup-url="simagd_solicitud_diagnostico_generateData"
		  data-toolbar="#bs_soldiag_toolbar"
		  data-cache="false"
		  data-show-refresh="true"
		  data-show-toggle="true"
		  data-show-columns="true"
		  data-search="true"
		  data-select-item-name="listaSolicitudesDiagnosticoToolbar"
		  {#data-side-pagination="server"#}
		  data-pagination="true"
		  data-page-list="[5, 10, 15, 25, 50, 75, 100{#, 200, 300, 500, 1000, All#}]"
		  {#data-sort-name="id"
		  data-sort-order="desc"#}
		  data-classes="table table-hover table-condensed table-no-bordered"
		  data-height="760">
		<thead>
		    <tr style="background-color: #183f52 !important; color: #fff !important;">
			{#<th data-field="action" data-switchable="false" class="col-md-2" data-halign="center" data-align="center" data-sortable="false">Acciones</th>#}
			<th data-field="soldiag_id" data-filter-bstable-apply="true" data-filter-bstable-type="number" class="col-md-1" data-visible="false" data-align="center" data-halign="center" data-sortable="true">ID</th>
			<th data-field="prc_origen" data-filter-bstable-apply="true" data-filter-bstable-by="stdroot_id" data-filter-bstable-type="select2" data-formatter="simagdOrigenFormatter"  data-visible="false" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Referido desde</th>
			<th data-field="prc_paciente" data-filter-bstable-apply="false" data-filter-bstable-by="pct_id" data-filter-bstable-type="select2" data-filter-bstable-remote-data-source="true" data-formatter="simagdPacienteFormatter"  data-switchable="false" class="col-md-3" data-align="left" data-halign="center" data-sortable="true">Paciente</th>
			<th data-field="soldiag_solicitante" data-filter-bstable-apply="true" data-filter-bstable-by="empsoldiag_id" data-filter-bstable-type="select2"  class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Solicitó</th>
			<th data-field="prc_areaAtencion" data-filter-bstable-apply="true" data-filter-bstable-by="ar_id" data-filter-bstable-type="select2" data-formatter="simagdAreaAtencionFormatter"  data-visible="false" class="col-md-1" data-align="left" data-halign="center" data-sortable="true">Procedencia</th>
			<th data-field="prc_atencion" data-filter-bstable-apply="true" data-filter-bstable-by="atn_id" data-filter-bstable-type="select2"  class="col-md-1" data-align="left" data-halign="center" data-sortable="true">Servicio clínico</th>
			<th data-field="prc_modalidad" data-filter-bstable-apply="true" data-filter-bstable-by="m_id" data-filter-bstable-type="select2"  class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Modalidad</th>
			<th data-field="prc_referido" data-filter-bstable-apply="true" data-filter-bstable-by="stdref_id" data-filter-bstable-type="select2" data-formatter="simagdReferidoFormatter"  data-visible="false" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Realizado en</th>
			<th data-field="prz_tecnologo" data-filter-bstable-apply="true" data-filter-bstable-by="tcnlprz_id" data-filter-bstable-type="select2"  data-visible="false" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Realizó</th>
			<th data-field="soldiag_fechaCreacion" data-filter-bstable-apply="true" data-filter-bstable-type="combodate" data-formatter="simagdDateTimeFormatter"  data-visible="false" class="col-md-1" data-align="right" data-halign="center" data-sortable="true">Se solicitó</th>
			<th data-field="est_fechaEstudio" data-filter-bstable-apply="true" data-filter-bstable-type="combodate" data-formatter="simagdDateTimeFormatter"  data-visible="false" class="col-md-1" data-align="right" data-halign="center" data-sortable="true">Se almacenó en PACS</th>
			<th data-field="prc_fechaCreacion" data-filter-bstable-apply="true" data-filter-bstable-type="combodate" data-formatter="simagdDateTimeFormatter"  data-visible="false" class="col-md-1" data-align="right" data-halign="center" data-sortable="true">Se solicitó estudio</th>
			<th data-field="soldiag_solicitado" data-filter-bstable-apply="true" data-filter-bstable-by="stdsoldiag_id" data-filter-bstable-type="select2"  class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Solicitado a</th>
			<th data-field="soldiag_remota"  data-formatter="remotaFormatter" data-visible="false" class="col-md-1" data-align="left" data-halign="center" data-sortable="true">A externo</th>
			<th data-field="action" data-formatter="actionSolDiagFormatter" data-events="actionSolDiagEvents" class="col-md-2" data-align="left" data-halign="center"><span class="glyphicon glyphicon-cog"></span></th>
		    </tr>
		</thead>
	    </table>
	</div>
    {% endif %}

    {% if _SOLCMPL_ALLOW_LIST == true %}
        <!-- toolbar for table-lista-lecturas -->
        {% include 'MinsalSimagdBundle:Menu:simagd_bstable_toolbar.html.twig' ignore missing with { 'code_entity': 'solcmpl' } %}
        <!-- END --| toolbar for table-lista-lecturas -->
        
	<div id="div-resultado-solicitudes-estudio-compl" style="display: none;" class="menu-listas-solicitudes" data-refresh-url="{{ path('simagd_solicitud_estudio_complementario_generateData') }}">
	    <table class="table table-condensed" id="table-lista-solicitudes-estudio-compl"
		  data-toggle="table"
		  data-id-field="solcmpl_id"
		  data-url=""
                  data-backup-url="simagd_solicitud_estudio_complementario_generateData"
		  data-toolbar="#bs_solcmpl_toolbar"
		  data-cache="false"
		  data-show-refresh="true"
		  data-show-toggle="true"
		  data-show-columns="true"
		  data-search="true"
		  data-select-item-name="listaSolicitudesEstudioComplementarioToolbar"
		  {#data-side-pagination="server"#}
		  data-pagination="true"
		  data-page-list="[5, 10, 15, 25, 50, 75, 100{#, 200, 300, 500, 1000, All#}]"
		  {#data-sort-name="id"
		  data-sort-order="desc"#}
		  data-classes="table table-hover table-condensed table-no-bordered"
		  data-height="760">
		<thead>
		    <tr style="background-color: #183f52 !important; color: #fff !important;">
			{#<th data-field="action" data-switchable="false" class="col-md-2" data-halign="center" data-align="center" data-sortable="false">Acciones</th>#}
			<th data-field="solcmpl_id" data-filter-bstable-apply="true" data-filter-bstable-type="number" class="col-md-1" data-visible="false" data-align="center" data-halign="center" data-sortable="true">ID</th>
			<th data-field="prc_origen" data-filter-bstable-apply="true" data-filter-bstable-by="stdroot_id" data-filter-bstable-type="select2" data-formatter="simagdOrigenFormatter"  data-visible="false" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Referido desde</th>
			<th data-field="prc_paciente" data-filter-bstable-apply="false" data-filter-bstable-by="pct_id" data-filter-bstable-type="select2" data-filter-bstable-remote-data-source="true" data-formatter="simagdPacienteFormatter"  data-switchable="false" class="col-md-3" data-align="left" data-halign="center" data-sortable="true">Paciente</th>
			<th data-field="prc_solicitante" data-filter-bstable-apply="true" data-filter-bstable-by="empprc_id" data-filter-bstable-type="select2"  data-visible="false" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Remitió</th>
			<th data-field="prc_areaAtencion" data-filter-bstable-apply="true" data-filter-bstable-by="ar_id" data-filter-bstable-type="select2" data-formatter="simagdAreaAtencionFormatter"  data-visible="false" class="col-md-1" data-align="left" data-halign="center" data-sortable="true">Procedencia</th>
			<th data-field="prc_atencion" data-filter-bstable-apply="true" data-filter-bstable-by="atn_id" data-filter-bstable-type="select2"  data-visible="false" class="col-md-1" data-align="left" data-halign="center" data-sortable="true">Servicio clínico</th>
			<th data-field="prc_modalidad" data-filter-bstable-apply="true" data-filter-bstable-by="m_id" data-filter-bstable-type="select2"  class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Modalidad</th>
			<th data-field="prc_referido" data-filter-bstable-apply="true" data-filter-bstable-by="stdref_id" data-filter-bstable-type="select2" data-formatter="simagdReferidoFormatter"  data-visible="false" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Realizado en</th>
			<th data-field="prz_tecnologo" data-filter-bstable-apply="true" data-filter-bstable-by="tcnlprz_id" data-filter-bstable-type="select2"  data-visible="false" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Realizó</th>
			<th data-field="est_fechaEstudio" data-filter-bstable-apply="true" data-filter-bstable-type="combodate"  data-formatter="simagdDateTimeFormatter" data-visible="false" class="col-md-1" data-align="right" data-halign="center" data-sortable="true">Se almacenó en PACS</th>
			<th data-field="prc_fechaCreacion" data-filter-bstable-apply="true" data-filter-bstable-type="combodate"  data-formatter="simagdDateTimeFormatter" data-visible="false" class="col-md-1" data-align="right" data-halign="center" data-sortable="true">Se solicitó estudio</th>
			<th data-field="solcmpl_fechaSolicitud" data-filter-bstable-apply="true" data-filter-bstable-type="combodate"  data-formatter="simagdDateTimeFormatter" class="col-md-1" data-align="right" data-halign="center" data-sortable="true">Se solicitó estudio ( Compl )</th>
			<th data-field="solcmpl_modalidad" data-filter-bstable-apply="true" data-filter-bstable-by="mcmpl_id" data-filter-bstable-type="select2" data-formatter="simagdModalidadSolicitadaFormatter"  class="col-md-1" data-align="left" data-halign="center" data-sortable="true">Modalidad ( Compl )</th>
			<th data-field="prAtn_nombre" data-filter-bstable-apply="true" data-filter-bstable-by="prAtn_id" data-filter-bstable-type="select2"  {% if _SOLCMPL_ALLOW_CREATE == false and _SOLCMPL_ALLOW_EDIT == false %} data-formatter="simagdPrioridadAtencionFormatter" {% endif %} class="col-md-1" data-align="left" data-halign="center" data-sortable="true">Prioridad</th>
			<th data-field="solcmpl_solicitante" data-filter-bstable-apply="true" data-filter-bstable-by="empcmpl_id" data-filter-bstable-type="select2" data-formatter="simagdSolicitanteEstudioFormatter" class="col-md-2" data-align="left" data-halign="center" data-sortable="true">Solicitó</th>
			<th data-field="solcmpl_solicitado"  class="col-md-2" data-visible="false" data-align="left" data-halign="center" data-sortable="true">Solicitado a</th>
			<th data-field="statusSc_nombreEstado" data-visible="false" data-formatter="estadoSolicitudFormatter" class="col-md-1" data-align="left" data-halign="center" data-sortable="true">Estado</th>
			<th data-field="action" data-formatter="actionSolEstudioCmplFormatter" data-events="actionSolEstudioCmplEvents" class="col-md-2" data-align="left" data-halign="center"><span class="glyphicon glyphicon-cog"></span></th>
		    </tr>
		</thead>
	    </table>
	</div>
    {% endif %}
        
    {% if _SOLDIAG_ALLOW_CREATE == true or _SOLDIAG_ALLOW_EDIT == true %}
        {% include 'MinsalSimagdBundle:RyxSolicitudDiagnosticoPostEstudioAdmin:soldiag_crearSolicitud_modal.html.twig'
            ignore missing with { 'establecimientos': establecimientos, 'medicos': medicos, 'default_empLogged': default_empLogged, 'defaultEstab': defaultEstab } %}
    {% endif %}

    {% if _PRC_ALLOW_VIEW == true %}
        {% include 'MinsalSimagdBundle:show_container_fullEntity:prc_total_info_modal_v2.html.twig' %}          {# solicitud de estudio #}
    {% endif %}
    {% if _PRC_ALLOW_CREATE == true or _PRC_ALLOW_EDIT == true %}
        {% include 'MinsalSimagdBundle:RyxSolicitudEstudioAdmin:prc_crearSolicitudEstudio_formatoRapido_modal.html.twig'
            ignore missing with { 'medicos': medicos, 'default_empLogged': default_empLogged, 'modalidades': modalidades, 'default_mldRx': default_mldRx, 'proyecciones': proyecciones } %}     {# solicitud de estudio #}
    {% endif %}
    {% if _PRC_ALLOW_EDIT == true %}
        {% include 'MinsalSimagdBundle:RyxSolicitudEstudioAdmin:prc_agregarIndicacionesRadiologo_modal.html.twig'
            ignore missing with { 'radiologos': radiologos, 'default_empLogged': default_empLogged } %}         {# solicitud (indRadx) #}
    {% endif %}
    {% if _SOLDIAG_ALLOW_VIEW == true %}
        {% include 'MinsalSimagdBundle:show_container_fullEntity:soldiag_total_info_modal_v2.html.twig' %}      {# solicitud de diagnóstico #}
    {% endif %}
    {% if _SOLCMPL_ALLOW_VIEW == true %}
        {% include 'MinsalSimagdBundle:show_container_fullEntity:solcmpl_total_info_modal_v2.html.twig' %}      {# solicitud de estudio complementario #}
    {% endif %}
        
    {% if _PRC_ALLOW_CREATE == true or _PRC_ALLOW_EDIT == true or is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_PROCEDIMIENTO_REALIZADO_CREATE') or is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_LECTURA_CREATE') or is_granted('ROLE_ADMIN') %}
        {% include 'MinsalSimagdBundle:ImagenologiaDigitalAdmin:simagd_asignarNuevoExpediente_modal.html.twig' %}     {# asignar registros a nuevo expediente #}
    {% endif %}
    
    <!-- form for create study request -->
    {% if _SOLCMPL_ALLOW_CREATE == true %}
        {% include 'MinsalSimagdBundle:RyxSolicitudEstudioComplementarioAdmin:solcmpl_crearSolicitudEstudio_formatoRapido_modal.html.twig'
		ignore missing with { 'collection_prioridades': collection_prioridades, 'collection_modalidades': collection_modalidades, 'collection_examenes': collection_examenes, 'collection_proyecciones': collection_proyecciones, 'collection_default_mldRx': collection_default_mldRx, 'collection_default_exmRx': collection_default_exmRx, 'collection_tiposEmpleado': collection_tiposEmpleado, 'collection_radiologos': collection_radiologos, 'collection_default_empLogged': collection_default_empLogged } %}
    {% endif %}

	<img src="http://localhost:8080/wado?requestType=WADO&studyUID=2.16.840.1.113669.632.20.1211.10001373596&seriesUID=1.3.12.2.1107.5.1.4.1003.30000011040706253106200004245&objectUID=1.3.12.2.1107.5.1.4.1003.30000011040706253106200004246&frameNumber=1&contentType=image/png" />

{% endblock %}
