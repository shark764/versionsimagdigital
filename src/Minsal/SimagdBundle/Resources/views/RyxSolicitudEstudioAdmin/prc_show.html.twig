{# empty Twig template #}

{% extends 'MinsalSimagdBundle::simagd_base_show.html.twig' %}

{% block actions %}
    <li>
	{% if admin.isGranted('EDIT', object) and admin.hasRoute('edit') and
		( ( app.user.idEmpleado.idTipoEmpleado.codigo == 'CIT' and app.user.idEstablecimiento.id == object.idEstablecimientoReferido.id ) or
		( app.user.idEstablecimiento.id == object.idAtenAreaModEstab.idEstablecimiento.id and admin.isGranted('CREATE') ) ) and
		( object.idUserReg.id == app.user.id or ( object.idUserMod is not null and object.idUserMod.id == app.user.id ) or
			is_granted('ROLE_MINSAL_SIMAGD_ADMIN_IMG_CITA_CREATE') or is_granted('ROLE_ADMIN') ) %}
            {% include 'SonataAdminBundle:Button:edit_button.html.twig' %}
        {% endif %}
    </li>
    <li>{% include 'SonataAdminBundle:Button:history_button.html.twig' %}</li>
    <li>{% include 'SonataAdminBundle:Button:list_button.html.twig' %}</li>
    <li>{% include 'MinsalSimagdBundle:RyxSolicitudEstudioAdmin:prc_citar_button.html.twig' %}</li>
    <li>{% include 'MinsalSimagdBundle:RyxSolicitudEstudioAdmin:prc_requiereCita_button.html.twig' %}</li>
    <li>{% include 'MinsalSimagdBundle:RyxSolicitudEstudioAdmin:prc_solicitarDiag_button.html.twig' %}</li>
{% endblock %}

{% block simagd_form_navbar_brand_title %}
    <span class="navbar-brand">
        <span class="label label-primary-v4">
            <i class="fa fa-inbox"></i> <i class="fa fa-eye"></i> Solicitud de estudio para: <i>{{ object.idExpediente.idPaciente|truncate(50) }}</i>
        </span>
    </span>
{% endblock %}

{# muestra de información de apoyo #}
{% block custom_entity_support %}
    <div id="custom-entity-content-body">
        {% if object.idExpediente is not null %}
            {{ render(controller( 'MinsalSimagdBundle:RyxSolicitudEstudioAdmin:mostrarInformacionModal',
                                                    { 'idPacientePadre' : object.idExpediente.idPaciente.id,
                                                        '__hcl' : app.request.get('__hcl') ? app.request.get('__hcl') : -1,
                                                        'solicitudEstudios' : object.idSolicitudestudios ? object.idSolicitudestudios.id : -1,
                                                        'id' : object.id ? object.id : -1,
                                                        '_sonata_admin' : 'minsal_simagd.admin.ryx_solicitud_estudio' } )) }}
        {% endif %}
    </div>
{% endblock %}
    
{% block content %}
    
    {{ parent() }}

    {% include 'MinsalSimagdBundle:RyxSolicitudEstudioAdmin:prc_exploracionSol_totalInfo.html.twig'
                            ignore missing with { 'explSolicitadas': object.solicitudEstudioProyeccion } %}     {# proyección solicitada #}
    
{% endblock %}

{# Bloque para agregar botones al final del show_view ( Adolfo Mode ) #}
