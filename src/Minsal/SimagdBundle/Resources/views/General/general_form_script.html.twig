{% autoescape false %}

	<script type="text/javascript">
        ////////////////////////////////////////////////////////////////
        //////// clear form
        ////////////////////////////////////////////////////////////////
        var clearForm = function(el) {
            $form = jQuery(el).closest('form');
            $form.data('formValidation').resetForm();
            $form.get(0).reset();
            $form
                .find('select')
                    .each(function () {
                        var $select2    = jQuery(this);
                        $select2.select2('val', $select2.find(':selected').val());
                    });
        }
        ////////////////////////////////////////////////////////////////

        ////////////////////////////////////////////////////////////////
        //////// select2 build
        ////////////////////////////////////////////////////////////////
        jQuery.extend(true,
                window.Admin,
                {
                    setup_select2: function(subject) {
                        if (window.SONATA_CONFIG && window.SONATA_CONFIG.USE_SELECT2 && window.Select2) {

                            jQuery('select:not([data-sonata-select2="false"])', subject).each(function() {
                                var select = $(this);

                                var allowClearEnabled = false;

                                if (select.find('option[value=""]').length) {
                                    allowClearEnabled = true;
                                }

                                if (select.attr('data-sonata-select2-allow-clear')==='true') {
                                    allowClearEnabled = true;
                                } else if (select.attr('data-sonata-select2-allow-clear')==='false') {
                                    allowClearEnabled = false;
                                }

                                var placeholder = '';
                                if (allowClearEnabled !== false) {
                                    placeholder = 'click para seleccionar...';
                                }

                                var __select2_options__ = {
                                    width: 'resolve',
                                    minimumResultsForSearch: 10,
                                    // dropdownAutoWidth : true,
                                    allowClear: allowClearEnabled,
                                    placeholder: placeholder,
                                };

                                //////// escapeMarkup
                                if (select.attr('data-sonata-select2-escape-markup')==='true') {
                                    jQuery.extend(true,
                                        __select2_options__,
                                        {
                                            escapeMarkup: function(markup) {
                                                return markup;
                                            }
                                        }
                                    );
                                }
                                ////////

                                //////// width
                                // if (select.attr('data-sonata-select2-limit-width')==='true') {
                                //     jQuery.extend(true,
                                //         __select2_options__,
                                //         {
                                //             width: '75%'
                                //         }
                                //     );
                                // }
                                ////////

                                //////// initialize with custom options
                                select.select2(__select2_options__);
                                ////////

                                var popover = select.data('popover');

                                if (undefined !== popover) {
                                    select
                                        .select2('container')
                                        .popover(popover.options)
                                    ;
                                }
                            });
                        }
                    }
                }
        ); // set value for filter

        // jQuery(document).ready(function() {
        //     ////////////////////////////////////////////////////////////////
        //     //////// table height
        //     ////////////////////////////////////////////////////////////////
        //     /*
        //      *
        //      * @type type
        //      * Get Table definition
        //      */
        //      // generate(null, 'unrealized_procedures');
        //      // jQuery('#')

        //     //////
        //     var $table = jQuery('#ryx_target_bstable');

        //     $table.on('load-success.bs.table', function (e, data) {
        //         var pageSize = $table.bootstrapTable('getOptions').pageSize;    // --| get pageSize
        //         if ((data.length > 0 && data.length <= 15) || pageSize <= 15) {
        //             $table.bootstrapTable('resetView', {height: 768}).bootstrapTable('resetWidth');
        //         }
        //         else {
        //             $table.bootstrapTable('resetView', {height: undefined}).bootstrapTable('resetWidth');
        //         }
        //     });

        // });
    </script>

{% endautoescape %}