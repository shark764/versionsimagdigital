{% autoescape false %}

	<script type="text/javascript">
        var _fn_show_object_detail = function(el, slug, id) {
            window.alert(slug + '\n' + id);
        }

        var generate = function(el, slug/*, type = 'list'*/) {
			////////
			var form_worklist = jQuery('#_exam_worklist_form');
			form_worklist.find('select').prop('disabled', jQuery.inArray(slug, ['unrealized_procedures', 'unrealized_procedures_today', 'unrealized_procedures_yesterday', 'unrealized_procedures_week', 'unrealized_procedures_month']) === -1);
            ////////

            ////////
            var $table = jQuery('#ryx_target_bstable');
            ////////
            $table.bootstrapTable('showLoading');

            var $url = null;
			switch (slug) {
				case 'unrealized_procedures':
					// $url = 'simagd_sin_realizar_generateTable';
					// break;
                case 'unrealized_procedures_today':
                case 'unrealized_procedures_yesterday':
                case 'unrealized_procedures_tomorrow':
                case 'unrealized_procedures_week':
                case 'unrealized_procedures_month':
                    $url = 'simagd_sin_realizar_generateTable';
                    break;
				case 'undiagnosed_studies':
					$url = 'simagd_sin_lectura_generateTable';
					break;
				case 'non_transcribed_results':
					$url = 'simagd_sin_transcribir_generateTable';
					break;
				case 'non_validated_results':
					$url = 'simagd_sin_validar_generateTable';
					break;
				default:
					break;
			}

            var type = jQuery('input[name=_worklist_dashboard_display_type]:checked').val();

            $.ajax({
                type: 'POST',
                dataType: 'json',
                url: Routing.generate($url),
                data: {
                    _xml_http_request: true,
                    id: 'id',
                    slug: slug,
                    type: type
                },
                success: function(response) {
                    ////////
                    $table
                        .bootstrapTable('destroy')
                        .bootstrapTable(response.options);
                    ////////
                },
                error: function(err) {
                    console.log(err.error, err.responseText);
                }
            });
        }

        jQuery(document).ready(function() {
            /*
             *
             * @type type
             * Get Table definition
             */

            //////
            var $table = jQuery('#ryx_target_bstable');
            ////////
            // $table.bootstrapTable('showLoading');

            ////////
            var DEFAULT_TABLE_OPTIONS = JSON.parse('{{ DEFAULT_TABLE_OPTIONS|json_encode|e('js')|raw }}');

            $table
                .bootstrapTable('destroy')
                .bootstrapTable(DEFAULT_TABLE_OPTIONS);
            ////////


            //////////////////////////////////////////////////////////////////////////
            //////// change content type - worklist
            //////////////////////////////////////////////////////////////////////////
            var __DOM__worklistDisplayType = jQuery('input[name=_worklist_dashboard_display_type]');

            __DOM__worklistDisplayType.on('ifChecked', function(e) {

                        jQuery('#_worklist_dashboard_display_items li.active').find('a').triggerHandler('click');

                        if (jQuery('#_worklist_dashboard_display_items li.active').hasClass('dropdown')) {
                            jQuery('#_worklist_dashboard_display_items li.active').find('li.active').find('a').triggerHandler('click');
                        }

            });
            //////////////////////////////////////////////////////////////////////////
            //////////////////////////////////////////////////////////////////////////

			// jQuery('#_switch_display').iCheck('destroy').bootstrapSwitch();
        });

        (function ($) {
            /*
             *
             * @type Array
             * Global variables for plugin
             */
            window.__FUNCTIONS_CALL__ = {};   // --| build data collection

            /*
             * Collection of functions / fc options
             */
            __FUNCTIONS_CALL__.functions = {
                onContextMenuItem: function(row, $el) {
                    /////////////////////////////////////////////////////
                    //////// EXAMS WORKLIST - CONTEXT MENU
                    /////////////////////////////////////////////////////
                    if($el.data('item') === 'unrealizedproceduresworklist_show')
                    {
                        var url = Routing.generate('simagd_lectura_show', {id: row.id});
                    }
                    else if($el.data('item') === 'unrealizedproceduresworklist_edit')
                    {
                        var url = Routing.generate('simagd_lectura_edit', {id: row.id});
                    }
                    else if($el.data('item') === 'unrealizedproceduresworklist_delete')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'unrealizedproceduresworklist_save')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'unrealizedproceduresworklist_saveandsearchinpacs')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'unrealizedproceduresworklist_goto')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'unrealizedproceduresworklist_studydownload')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'unrealizedproceduresworklist_create')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }

                    /////////////////////////////////////////////////////
                    //////// STUDY DIAGNOSIS WORKLIST - CONTEXT MENU
                    /////////////////////////////////////////////////////
                    else if($el.data('item') === 'undiagnosedstudiesworklist_show')
                    {
                        var url = Routing.generate('simagd_lectura_show', {id: row.id});
                    }
                    else if($el.data('item') === 'undiagnosedstudiesworklist_edit')
                    {
                        var url = Routing.generate('simagd_lectura_edit', {id: row.id});
                    }
                    else if($el.data('item') === 'undiagnosedstudiesworklist_delete')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'undiagnosedstudiesworklist_save')
                    {
                        var url = Routing.generate('simagd_lectura_show', {id: row.id});
                    }
                    else if($el.data('item') === 'undiagnosedstudiesworklist_saveandclose')
                    {
                        var url = Routing.generate('simagd_lectura_edit', {id: row.id});
                    }
                    else if($el.data('item') === 'undiagnosedstudiesworklist_goto')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'undiagnosedstudiesworklist_studydownload')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'undiagnosedstudiesworklist_create')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }

                    /////////////////////////////////////////////////////
                    //////// WRITE DIAGNOSIS WORKLIST - CONTEXT MENU
                    /////////////////////////////////////////////////////
                    else if($el.data('item') === 'nontranscribedresultsworklist_show')
                    {
                        var url = Routing.generate('simagd_lectura_show', {id: row.id});
                    }
                    else if($el.data('item') === 'nontranscribedresultsworklist_edit')
                    {
                        var url = Routing.generate('simagd_lectura_edit', {id: row.id});
                    }
                    else if($el.data('item') === 'nontranscribedresultsworklist_delete')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'nontranscribedresultsworklist_save')
                    {
                        var url = Routing.generate('simagd_lectura_show', {id: row.id});
                    }
                    else if($el.data('item') === 'nontranscribedresultsworklist_saveandclose')
                    {
                        var url = Routing.generate('simagd_lectura_edit', {id: row.id});
                    }
                    else if($el.data('item') === 'nontranscribedresultsworklist_goto')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'nontranscribedresultsworklist_studydownload')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'nontranscribedresultsworklist_create')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }

                    /////////////////////////////////////////////////////
                    //////// CHECK DIAGNOSIS WORKLIST - CONTEXT MENU
                    /////////////////////////////////////////////////////
                    else if($el.data('item') === 'nonvalidatedresultsworklist_show')
                    {
                        var url = Routing.generate('simagd_lectura_show', {id: row.id});
                    }
                    else if($el.data('item') === 'nonvalidatedresultsworklist_edit')
                    {
                        var url = Routing.generate('simagd_lectura_edit', {id: row.id});
                    }
                    else if($el.data('item') === 'nonvalidatedresultsworklist_delete')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'nonvalidatedresultsworklist_approve')
                    {
                        var url = Routing.generate('simagd_lectura_show', {id: row.id});
                    }
                    else if($el.data('item') === 'nonvalidatedresultsworklist_reprobate')
                    {
                        var url = Routing.generate('simagd_lectura_edit', {id: row.id});
                    }
                    else if($el.data('item') === 'nonvalidatedresultsworklist_goto')
                    {
                        var url = Routing.generate('simagd_lectura_delete', {id: row.id});
                    }
                    else if($el.data('item') === 'nonvalidatedresultsworklist_studydownload')
                    {
                        var url = Routing.generate('simagd_lectura_show', {id: row.id});
                    }
                    else if($el.data('item') === 'nonvalidatedresultsworklist_create')
                    {
                        var url = Routing.generate('simagd_lectura_edit', {id: row.id});
                    }
                    // end
                },
            };  // --| build function object

        }(jQuery));

    </script>

{% endautoescape %}